
# Simple > Clever

## Code Example 2 (Go - deep nesting)
```go
func handle(w http.ResponseWriter, r *http.Request) {
	if r.Method == http.MethodPost {
		if r.Body != nil {
			body, err := io.ReadAll(r.Body)
			if err == nil {
				if len(body) > 0 {
					// do work
					w.Write([]byte("OK"))
				} else {
					http.Error(w, "empty", 400)
				}
			} else {
				http.Error(w, "read error", 500)
			}
		} else {
			http.Error(w, "no body", 400)
		}
	} else {
		http.Error(w, "method not allowed", 405)
	}
}
```
**Why is this complex:**
* Difficult to follow the "happy path"
* So many tabs

<br/><br/><br/><br/><br/><br/><br/><br/><br/>

### Simplified

```go
func handle(w http.ResponseWriter, r *http.Request) {
	if r.Method != http.MethodPost {
		http.Error(w, "method not allowed", 405)
		return
	}
	if r.Body == nil {
		http.Error(w, "no body", 400)
		return
	}
	body, err := io.ReadAll(r.Body)
	if err != nil {
		http.Error(w, "read error", 500)
		return
	}
	if len(body) == 0 {
		http.Error(w, "empty", 400)
		return
	}
	// do work
	w.Write([]byte("OK"))
}
```
**Why is this simple:**
* Fail fast
* Keep the "happy path" obvious